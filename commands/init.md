---
description: "Initialize design project with interactive preplanning: requirements discovery, device targeting, design vibe"
---

# Design Initialization

Interactive preplanning phase that configures your design project before generating artifacts.

## Usage

```
/pixel-perfect:init <target> [options]
```

## Arguments

- `<target>`: Epic or feature to initialize. Supports smart path resolution:
  - **Full path**: `.spec/epics/epic-1` → uses exact path
  - **Name only**: `epic-1` → searches spec directory for matching folder
  - **Nested**: `lunch-menu` → finds `.spec/epics/epic-1/sprints/lunch-menu`

## Options

- `--requirements <path>`: Use this file as requirements (skips discovery search)
- `--force`: Overwrite existing `design.config.yaml`
- `--quick`: Auto-accept inferred values with minimal prompts
- `--platforms <list>`: Pre-set platforms (comma-separated: `mobile-ios,web-desktop`)
- `--vibe <name>`: Pre-set design vibe (`minimal`, `modern`, `playful`, etc.)

## What It Does

This command walks you through setting up your design project:

1. **Load Project Config** - Reads `.pixel-perfect/config.json` for defaults (if exists)
2. **Requirements Discovery** - Finds or asks for your PRD/requirements document
3. **Device Targeting** - Infers and confirms which platforms you're designing for
4. **Design Vibe** - Captures the aesthetic direction for your mockups
5. **URL Analysis** - Fetches and analyzes any reference URLs in requirements
6. **Configuration** - Saves preferences to `{epic}/design/design.config.yaml`

## Project Configuration

If `.pixel-perfect/config.json` exists in your project root, init uses it for:
- **Search root**: Where to search for targets (default: project root)
- **Pre-selected platforms**: Skip platform multi-select if configured
- **Default vibe**: Skip vibe question if configured
- **Naming style**: Default design key naming convention

Example `.pixel-perfect/config.json`:
```json
{
  "specRoot": ".",
  "defaults": {
    "platforms": ["mobile-ios", "web-desktop"],
    "vibe": "modern"
  }
}
```

If no project config exists, init searches from project root for your target folder.

## Preplanning Workflow

### Step 1: Requirements Discovery

**If `--requirements <path>` is provided:** Use that file directly, skip all discovery.

**Otherwise, search for requirements in this order:**
1. `{epic}/PRD.md`
2. `{epic}/requirements.md`
3. `{epic}/REQUIREMENTS.md`
4. `{epic}/spec.md`
5. `{epic}/*.md` (any markdown file)

**If a candidate file is found**, ask the user to confirm:
```
Found potential requirements file: {epic}/PRD.md

? Is this your requirements document?
  > Yes, use this file
    No, search for another
    Enter path manually
```

**If no candidate files found**, ask user for path:
```
No requirements file found in {epic}/

? Where are your requirements?
  > Enter path to requirements file
    Paste requirements directly
```

### Step 2: Device Targeting

Based on requirements analysis, suggests target platforms. Confirm or modify:

| Platform | Indicators |
|----------|------------|
| Mobile (iOS/Android) | "app", "mobile", "touch", "swipe", "native" |
| Web (Desktop) | "website", "dashboard", "browser", "responsive" |
| Web (Mobile) | "responsive", "mobile-first", "PWA" |
| Desktop App | "electron", "desktop", "native app", "menubar" |
| CLI/Terminal | "command line", "terminal", "CLI", "shell" |
| Tablet | "tablet", "iPad", "large screen" |

You can select multiple platforms using the multi-selector.

### Step 3: Design Vibe

Infers aesthetic direction from requirements, or asks you to choose:

| Vibe | Description |
|------|-------------|
| Minimal | Clean, whitespace-focused, essential elements only |
| Modern | Contemporary patterns, subtle animations, current trends |
| Playful | Rounded corners, bright colors, friendly feel |
| Corporate | Professional, structured, enterprise-appropriate |
| Bold | High contrast, strong typography, impactful |
| Technical | Data-dense, developer-focused, functional |
| Elegant | Refined, sophisticated, premium feel |

You can also provide a custom vibe description.

### Step 4: URL Analysis

If your requirements contain URLs (design references, competitor analysis, inspiration):
- Fetches and analyzes each URL using available web tools (WebFetch, MCP servers, or other configured tools)
- Extracts relevant design patterns
- Saves analysis to `{epic}/design/research/url-analysis.md`

**Note:** URL analysis requires web access tools. If no web tools are available, this step is skipped and URLs are listed in the config for manual review.

### Step 5: Configuration Output

Saves all preferences to `{epic}/design/design.config.yaml`:

```yaml
# Auto-generated by /pixel-perfect:init
version: "1.0"
created: "2025-01-30"

# Requirements source
requirements:
  path: "PRD.md"
  analyzed: true

# Target platforms (multi-select)
platforms:
  - mobile-ios
  - mobile-android
  - web-desktop

# Design aesthetic
vibe:
  primary: "modern"
  description: "Clean, contemporary design with subtle micro-interactions"
  colors: "neutral with accent" # inferred or specified

# Analyzed references
references:
  urls_analyzed: 3
  patterns_extracted:
    - "bottom navigation"
    - "card-based layout"
    - "floating action button"

# Output preferences
extensions:
  spec: ".spec.json"
  mock: ".mock.html"
paths:
  specs: "prompts"
  mocks: "mocks"
naming:
  style: "snake_case"
```

## Example Sessions

### With automatic discovery
```
> /pixel-perfect:init lunch-menu

Searching for "lunch-menu"...
Found: specs/epics/epic-1/sprints/lunch-menu

Scanning for requirements...
Found potential requirements file: specs/epics/epic-1/sprints/lunch-menu/PRD.md

? Is this your requirements document?
  > Yes, use this file
    No, search for another
    Enter path manually

Using: specs/epics/epic-1/sprints/lunch-menu/PRD.md

Analyzing requirements for platform hints...
Detected platforms: Mobile (iOS/Android), Web (Desktop)

? Which platforms are you designing for? (multi-select)
  [x] Mobile - iOS
  [x] Mobile - Android
  [x] Web - Desktop
  [ ] Web - Mobile
  [ ] Desktop App
  [ ] CLI/Terminal
  [ ] Tablet

Analyzing design direction...
Detected vibe: "Modern" (based on: "clean interface", "minimal navigation")

? What's the design vibe you're going for?
  > Modern (Recommended)
    Minimal
    Playful
    Corporate
    Other...

Found 2 URLs in requirements. Analyzing...
- https://dribbble.com/shots/... (design inspiration)
- https://competitor.app/... (competitor reference)

Configuration saved to specs/epics/epic-1/sprints/lunch-menu/design/design.config.yaml

Ready to plan! Run:
  /pixel-perfect:plan .spec/epics/epic-1
```

### With explicit requirements path
```
> /pixel-perfect:init lunch-menu --requirements ../shared/product-spec.md

Searching for "lunch-menu"...
Found: specs/epics/epic-1/sprints/lunch-menu

Using requirements: ../shared/product-spec.md

Analyzing requirements for platform hints...
```

### When no requirements found
```
> /pixel-perfect:init new-feature

Searching for "new-feature"...
Found: specs/epics/epic-2/new-feature

Scanning for requirements...
No requirements file found in specs/epics/epic-2/new-feature/

? Where are your requirements?
  > Enter path to requirements file
    Paste requirements directly

Enter path: ../docs/NEW-FEATURE-PRD.md

Using: ../docs/NEW-FEATURE-PRD.md
```

## Skipping Init

If `design.config.yaml` already exists, the design workflow uses existing config.
To reconfigure, either:
- Delete `design.config.yaml` and run init again
- Run `/pixel-perfect:init --force` to overwrite

## Integration with Design Workflow

When you run `/pixel-perfect:design`:
1. Checks for `design.config.yaml`
2. If missing, automatically runs init first
3. Uses config to inform all subsequent phases

This ensures every design project has explicit platform targets and aesthetic direction before generating artifacts.
